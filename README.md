# 台灣股票分析系統

## 專案簡介
這是一個功能完整的台灣證券市場分析平台，提供即時股票資料查詢、ETF資訊查詢、產業代號查詢等功能。系統整合了台灣證券交易所的即時資料，並提供直觀的使用者介面。

## 功能特點

### 即時股票資料
- 從台灣證券交易所獲取即時股票資料
- 支援多種資料來源（MI_INDEX, STOCK_DAY_ALL）
- 自動切換備用資料來源
- 離線時可使用示範資料
- 全球主要股市指數即時行情（使用 Yahoo Finance API）
- 完整的產業代號與名稱對照表

### ETF 查詢
- 完整的 ETF 基金清單
- 即時查詢基金代號、名稱、追蹤指數等資訊
- 支援關鍵字搜尋（代號、名稱、追蹤指數）
- 資料快取機制提升效能

### 資料篩選
- 多種篩選條件：
  - 成交量（張數）
  - 成交價
  - 漲跌幅（%）
  - 成交筆數
  - 股票名稱/代碼
- 支援數值比較（大於、小於、等於）
- 支援文字模糊搜尋

### 資料視覺化
- 清晰的表格展示
- 漲跌以不同顏色標示（紅漲綠跌）
- 全球指數無縫循環跑馬燈顯示
- 響應式設計，支援各種裝置

### 資料匯出
- 將當前顯示的資料匯出為 Excel 格式
- 保留所有篩選條件

## 系統架構

### 前端 (Frontend)
- **index.html** - 主頁面，顯示股票行情與分析
- **etf.html** - ETF 基金查詢頁面
- **industries.html** - 產業代號查詢頁面
- **app.js** - 主要業務邏輯
  - 股票資料獲取與處理
  - 全球指數資料處理與顯示
  - 跑馬燈動畫控制
  - 資料篩選與排序
- **styles.css** - 樣式設計
  - 響應式佈局
  - 跑馬燈動畫效果
  - 自適應顏色主題
  - 表格與表單樣式

### 後端 (Backend)
- **server/server.js** - Node.js + Express 伺服器
  - 提供 RESTful API 服務
  - 處理 CORS 跨域請求
  - 代理請求台灣證券交易所 API
  - 整合 Yahoo Finance API 獲取全球指數資料
  - 產業代號資料獲取與快取
  - ETF 資料獲取與快取
  - 資料快取機制（5分鐘）
  - 錯誤處理與日誌記錄
  - 靜態檔案服務

## 開發環境設置

### 必要條件
- Node.js (v14 以上)
- npm 或 yarn

### 安裝步驟

1. **克隆專案**
   ```bash
   git clone [您的專案URL]
   cd tw_stock100
   ```

2. **安裝後端依賴**
   ```bash
   cd server
   npm install express axios cors
   ```

3. **啟動後端伺服器**
   ```bash
   node server.js
   ```
   伺服器預設運行在 `http://localhost:3000`

4. **啟動前端開發**
   - 使用瀏覽器開啟 `http://localhost:3000`
   - 或使用 VS Code 的 Live Server 擴充功能開啟 `index.html`

### 開發注意事項

1. **API 請求**
   - 所有 API 請求都應發送到 `http://localhost:3000`
   - 範例：`fetch('http://localhost:3000/api/etf-list')`

2. **環境變數**
   - 如需配置環境變數，請在 `server` 目錄下建立 `.env` 檔案
   - 範例：
     ```
     PORT=3000
     NODE_ENV=development
     ```

3. **除錯**
   - 後端日誌會顯示在終端機視窗中
   - 前端錯誤可透過瀏覽器開發者工具 (F12) 查看

## 專案結構

```
tw_stock100/
├── index.html          # 主頁面
├── etf.html            # ETF 查詢頁面
├── industries.html      # 產業代號查詢頁面
├── app.js              # 前端主要邏輯
├── styles.css          # 全局樣式
└── server/             # 後端程式碼
    ├── server.js       # 後端主程式
    ├── package.json    # 後端依賴
    └── node_modules/   # 後端依賴套件
```

## 使用說明

### 股票查詢功能
1. 點擊「取得股票資料」按鈕開始獲取資料
2. 使用篩選功能找到符合條件的股票
3. 點擊「匯出Excel」將資料匯出

### 產業代號查詢
1. 點擊「查詢產業代號」按鈕開啟查詢頁面
2. 在搜尋框中輸入產業代號或名稱進行搜尋
3. 表格會即時顯示符合條件的產業代號

### 全球指數資訊
- 頂部跑馬燈顯示全球主要股市即時行情
  - 紅色表示上漲
  - 綠色表示下跌
  - 懸停可暫停滾動

## 技術規格
- **前端技術**：
  - HTML5, CSS3, JavaScript (ES6+)
  - 原生DOM操作
  - CSS3 動畫效果
  - 響應式設計
  - 無縫滾動實現
  - 事件委託優化

- **後端技術**：
  - Node.js
  - Express.js
  - Axios (HTTP客戶端)
  - yahoo-finance2 (全球指數資料獲取)
  - CORS 處理
  - 快取機制

## 授權
MIT License

## 注意事項

- 本系統資料來源為台灣證券交易所
- 資料更新頻率受限於證交所 API
- 投資決策請參考專業建議
- 請勿將此系統用於實際交易決策

## 未來改進

### 功能增強
- 增加技術分析圖表
- 加入更多技術指標
- 實現即時更新功能
- 增加使用者自訂警示
- 優化行動裝置體驗
- 增加更多國際市場指數

### 使用者體驗
- 自訂跑馬燈滾動速度
- 增加指數點擊查看詳細資訊功能
- 增加產業別股票列表查詢
- 加入產業別走勢分析
- 提供更詳細的 ETF 分析資料

### 技術改進
- 實作 WebSocket 即時更新
- 加入單元測試與整合測試
- 優化前端效能
- 實作前端路由
- 加入狀態管理

## 貢獻指南

歡迎提交 Issue 或 Pull Request。在提交之前，請確保：

1. 程式碼符合專案風格指南
2. 包含適當的測試案例
3. 更新相關文檔
4. 描述清楚變更內容與原因

## 授權

[MIT 授權](LICENSE)
